---
title: 不建议重载并且和或者操作符
date: 2021-05-12 00:01:04
tags:
categories: c++
doc:
---

# 不建议重载并且和或者操作符



```c++
#define _CRT_SECURE_NO_WARNINGS
#include<iostream>


using namespace std;

class A
{
public:
	A();
	A(int x);
	~A();
	A & setValue(int x);
	int getValue() { return value; }
	bool operator&&(const A & ta);
	bool operator||(const A & ta);
private:
	int value;
};

A::A(int x)
{
	value = x;
}



A & A::setValue(int x)
{
	value = x;
	return *this;
}


bool A::operator||(const A & ta)
{
	cout << "重载了||运算符" << endl;
	if (value != 0 || ta.value != 0)
	{
		
		return true;
	}
	return false;
}
bool A::operator&&(const A & ta)
{
	cout << "重载了&&运算符" << endl;
	if (value != 0 && ta.value != 0)
	{
		
		return true;
	}
	return false;
}
A::A()
{
}

A::~A()
{
}

int main(char *argv[], int argc)
{
	A a(0), b(20);
	int i = 0, j = 20;
	//不会发生短路现象
	if (a && b) {
		cout << "a && b == true" << endl;
	}
	if (b || a.setValue(100)) {
		cout << "a && b == true" << endl;
	}

	//因为b不等于0 ,正常情况下a.setValue(100)是不会执行的,所以重载了||不会发生短路
	cout << a.getValue() << endl;


	//正常发生短路,所以i和j的值不变
	if (i && (j = 100));
	cout << "j = " << j << endl;

	if (j || (i=20));
	cout << "i = " << i << endl;
	return 0;
}

```

![1620750005442](/images/javawz/1620750005442.png)

