---
title: 栈解旋
date: 2021-06-20 07:33:40
tags:
categories: cpp
doc:
---

# 栈解旋

异常被抛出后，从进入try块起，到异常被抛掷前，这期间在栈上的构造的
所有对象，都会被自动析构。析构的顺序与构造的顺序相反。这一过程称为栈
的解旋(unwinding)。

```cpp
#define _CRT_SECURE_NO_WARNINGS
#include<iostream>


using namespace std;

class Person {
public:

	Person() {
		cout << "对象构造" << endl;
	}
	
	~Person() {
		cout << "对象析构" << endl;
	}
};

double dev(double x, double y) {

	Person p1, p2;

	if (y == 0)
	{
		throw y;
	}

	return x / y;
}


void test01() {
	dev(10,0);
}

void test02() {
	try {
		test01();
	}
	catch (double y) //异常是根据类型进行匹配的 可以是catch (double)不接收异常的值
	{
		cout << "除数为: " << y << endl;
	}
}
int main(char *argv[], int argc)
{
	test02();
	return 0;
}

```

![1624146025433](/images/javawz/1624146025433.png)