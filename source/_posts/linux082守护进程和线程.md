---
title: 守护进程和线程
date: 2022-01-24 20:30:39
tags:
categories: linux
doc:
---

## 守护进程

### 1.1 守护进程介绍

Daemon(精灵)进程，是Linux中的后台服务进程，通常独立于控制终端并且周期性地执行某种任务或等待处理某些发生的事件。一般采用以d结尾的名字，如vsftpd

Linux后台的一些系统服务进程，没有控制终端，不能直接和用户交互。不受用户登录、注销的影响，一直在运行着，他们都是守护进程。如：预读入缓输出机制的实现；ftp服务器；nfs服务器等。

- 总结守护进程的特点：
  -  Linux后台服务进程
  -  独立于控制终端
  -  周期性的执行某种任务
  -  不受用户登陆和注销的影响
  -  一般采用以d结尾的名字



### 1.2 进程组和会话

-  进程组

  -  进程组是一个或者多个进程的集合，每个进程都属于一个进程组，引入进程组是为了简化对进程的管理。当父进程创建子进程的时候，默认子进程与父进程属于同一个进程组。

  - 进程组ID\==第一个进程ID（组长进程）。如父进程创建了多个子进程，父进程和多个子进程同属于一个组，而由于父进程是进程组里的第一个进程，所以父进程就是这个组的组长, 组长ID==父进程ID。

  -  可以使用kill -SIGKILL -进程组ID(负的)来将整个进程组内的进程全部杀死。
  -  只要进程组中有一个进程存在，进程组就存在，与组长进程是否终止无关。
  -  进程组生存期：从进程组创建到最后一个进程离开

-  会话
  -  一个会话是一个或多个进程组的集合。
  -  创建会话的进程不能是进程组组长
  -  创建会话的进程成为一个进程组的组长进程，同时也成为会话的会长。
  -  需要有root权限（ubuntu不需要）
  -  新创建的会话丢弃原有的控制终端
  -  建立新会话时，先调用fork, 父进程终止，子进程调用setsid函数
  -  可以使用`ps ajx`来查看进程组ID和会话ID
  - 可以fork出几个子进程，然后查看进程组ID和会话ID

-  进程组和会话的关系图

  ![img](/images/javawz/wpsA28D.tmp.jpg) 