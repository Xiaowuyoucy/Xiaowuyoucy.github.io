---
title: 多继承与虚继承
date: 2021-05-13 01:40:38
tags:
categories: c++
doc:
---

# 多继承与虚继承

### 多继承

俗话讲的,鱼与熊掌不可兼得,而在计算机就可以实现,生成一种新的对象,
叫熊掌鱼,多继承自鱼和熊掌即可。还比如生活中,“兼”。

![1620841315510](/images/javawz/1620841315510.png)

#### 一个类有多个直接基类的继承关系称为多继承

![1620841334608](/images/javawz/1620841334608.png)



#### 沙发床实现

![1620841356908](/images/javawz/1620841356908.png)

```cpp
#define  _CRT_SECURE_NO_WARNINGS 
#include <iostream>

using namespace std;

//家具类
class Furniture
{
public:
	int m; //材质  
};
//如果子类虚继承本来， 编译器会将父类中的成员， 只拷贝一份。

//床类
class Bed: virtual  public Furniture
{
public:
	void sleep()
	{
		cout << "在床上睡觉" << endl;
	}
};

//沙发类
class Sofa :virtual public Furniture
{
public:
	void sit()
	{
		cout << "在沙发上睡觉" << endl;
	}
};

//沙发床
class SofaBed :public Bed, public Sofa
{
public:
	void sitAndSleep()
	{
		sit();//sofa
		sleep();//bed
	}
};

int main(void)
{
	Bed b;
	b.sleep();

	cout << "  ---- " << endl;

	Sofa s; //m 
	s.m = 100;
	s.sit();
	cout << "------- " << endl;

	SofaBed sb;
	sb.sitAndSleep();

	sb.m; //多继承如果 
	

	return 0;
}

```

### 虚继承

如果一个派生类从多个基类派生，而这些基类又有一个共同的基类，则
在对该基类中声明的名字进行访问时，可能产生二义性

![1620841441584](/images/javawz/1620841441584.png)

![1620841525168](/images/javawz/1620841525168.png)

![1620841541994](/images/javawz/1620841541994.png)

![1620841576400](/images/javawz/1620841576400.png)

![1620841589330](/images/javawz/1620841589330.png)